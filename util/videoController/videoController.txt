// [ë¹„ë””ì˜¤ ì¬ìƒ ì†ë„ ì¡°ì ˆ]
setTimeout(() => {
    const outerIframe = document.getElementById('contentsFrame');
    if (!outerIframe) return console.log('outer iframe ì—†ìŒ');

    const innerFrame = outerIframe.contentWindow.document.getElementById('frame');
    if (!innerFrame) return console.log('inner iframe ì—†ìŒ');

    try {
        const video = innerFrame.contentWindow.document.querySelector('video');
        if (video) {
            video.playbackRate = 4.0;
            console.log('ğŸ‰ ì¬ìƒì†ë„ 4ë°°ë¡œ ì„¤ì • ì™„ë£Œ!');
        } else {
            console.log('âŒ video íƒœê·¸ ì—†ìŒ');
        }
    } catch (e) {
        console.error('ğŸš« ì ‘ê·¼ ë¶ˆê°€ (CORS ë¬¸ì œ ê°€ëŠ¥)', e);
    }
}, 5000); // ì¶©ë¶„íˆ ë¡œë”© í›„ ì‹¤í–‰

// [ë¹„ë””ì˜¤ ë‹¤ìŒ ë²„íŠ¼ í´ë¦­]
setInterval(() => {
    try {
        const outer = document.getElementById('contentsFrame');
        if (!outer) return console.log('âŒ outer iframe ì—†ìŒ');

        const outerDoc = outer.contentWindow.document;
        const inner = outerDoc.getElementById('frame');
        if (!inner) return console.log('âŒ inner iframe (#frame) ì—†ìŒ');

        const innerDoc = inner.contentWindow.document;
        const btn = innerDoc.getElementById('nextBtn');

        if (btn) {
            const isDisabled = btn.hasAttribute('disabled');
            const isClickable = btn.style.pointerEvents !== 'none';

            if (!isDisabled && isClickable) {
                btn.click();
                console.log('âœ… nextBtn í´ë¦­ë¨');
            } else {
                console.log(`â¸ í´ë¦­ ë¶ˆê°€: disabled=${isDisabled}, pointerEvents=${btn.style.pointerEvents}`);
            }
        } else {
            console.log('âŒ nextBtn ì—†ìŒ');
        }
    } catch (e) {
        console.error('ğŸš« ì ‘ê·¼ ì‹¤íŒ¨ (iframe ë¡œë”© ì¤‘ì´ê±°ë‚˜ CORS)', e);
    }
}, 5000); // 5ì´ˆë§ˆë‹¤ ë°˜ë³µ ì‹¤í–‰


// [í†µí•© ì½”ë“œ]
const CHECK_INTERVAL = 5000;

setInterval(() => {
    try {
        const outer = document.getElementById('contentsFrame');
        if (!outer) return console.log('âŒ outer iframe ì—†ìŒ');

        const outerDoc = outer.contentWindow.document;
        const inner = outerDoc.getElementById('frame');
        if (!inner) return console.log('âŒ inner iframe (#frame) ì—†ìŒ');

        const innerDoc = inner.contentWindow.document;

        // [1] ë²„íŠ¼ ìë™ í´ë¦­
        const btn = innerDoc.getElementById('nextBtn');
        if (btn) {
            const isDisabled = btn.hasAttribute('disabled');
            const isClickable = btn.style.pointerEvents !== 'none';

            if (!isDisabled && isClickable) {
                btn.click();
                console.log('âœ… nextBtn í´ë¦­ë¨');
            } else {
                console.log(`â¸ í´ë¦­ ë¶ˆê°€: disabled=${isDisabled}, pointerEvents=${btn.style.pointerEvents}`);
            }
        } else {
            console.log('âŒ nextBtn ì—†ìŒ');
        }

        // [2] video íƒœê·¸ ì†ë„ ì¡°ì ˆ
        const video = innerDoc.querySelector('video');
        if (video) {
            if (video.playbackRate !== 4.0) {
                video.playbackRate = 4.0;
                console.log('ğŸ‰ ì¬ìƒì†ë„ 4ë°°ë¡œ ì„¤ì • ì™„ë£Œ!');
            }
        } else {
            console.log('ğŸ¥ video íƒœê·¸ ì—†ìŒ');
        }

    } catch (e) {
        console.error('ğŸš« ì ‘ê·¼ ì‹¤íŒ¨ (iframe ë¡œë”© ì¤‘ì´ê±°ë‚˜ CORS)', e);
    }
}, CHECK_INTERVAL); // 5ì´ˆë§ˆë‹¤ ë°˜ë³µ