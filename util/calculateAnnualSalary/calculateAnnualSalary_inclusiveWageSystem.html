<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>💼 연봉 실수령액 계산기</title>
  <style>
    :root {
      --bg:#0b1020; --fg:#e8ecff; --muted:#a7b0d9; --card:#121838; --accent:#6aa2ff; --ok:#3ddc97; --warn:#ffba49;
      --input:#0f1630; --border:#22305e;
    }
    * { box-sizing: border-box; }
    html,body { height: 100%; }
    body { margin:0; background:var(--bg); color:var(--fg); font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif; }
    header { position: sticky; top:0; padding:14px 18px; display:flex; gap:14px; align-items:center; background:linear-gradient(180deg, rgba(11,16,32,1), rgba(11,16,32,0.85)); backdrop-filter: blur(6px); border-bottom:1px solid var(--border); z-index:2; }
    h1 { font-size:18px; margin:0; letter-spacing: .3px; }
    .wrap { max-width: 760px; margin: 22px auto; padding: 0 16px 60px; display: grid; grid-template-columns: 1fr; gap: 18px; }
    .card { background: var(--card); border:1px solid var(--border); border-radius: 16px; padding: 18px; box-shadow: 0 6px 28px rgba(0,0,0,.25); }
    .card h2 { font-size: 16px; margin: 0 0 10px; display:flex; align-items:center; gap:10px; }
    .hint { color: var(--muted); font-size: 12px; }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin: 10px 0; }
    .row-3 { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:10px; margin: 10px 0; }
    .col { display:flex; flex-direction: column; gap:6px; }
    label { font-size: 12px; color: var(--muted); }
    input, select, button, textarea { background: var(--input); color: var(--fg); border: 1px solid var(--border); border-radius: 10px; padding: 10px 12px; font-size: 14px; }
    input[type="number"] { text-align: right; }
    .btn { cursor: pointer; user-select: none; }
    .btn.primary { background: linear-gradient(180deg, #6aa2ff, #3a66ff); border-color: #2a4adf; }
    .btn.ghost { background: transparent; }
    .stack { display:flex; flex-wrap: wrap; gap:8px; }
    .tag { font-size:12px; padding:6px 8px; border:1px dashed var(--border); border-radius: 10px; color: var(--muted); }
    .result { margin-top: 14px; padding: 12px; background: rgba(106,162,255,.08); border:1px solid var(--border); border-radius: 12px; }
    .result h3 { margin: 0 0 6px; font-size: 14px; }
    .mono { font-variant-numeric: tabular-nums; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .grid { display:grid; gap:8px; }
    .grid.cols-3 { grid-template-columns: 1fr 1fr 1fr; }
    .grid.cols-2 { grid-template-columns: 1fr 1fr; }
    .kv { display:flex; justify-content: space-between; gap:10px; padding: 8px 10px; background: rgba(255,255,255,.02); border:1px solid var(--border); border-radius: 8px; }
    .kv b { font-weight:600; }
    .foot { margin-top: 8px; font-size: 12px; color: var(--muted); }
    .sep { height:1px; background: var(--border); margin: 10px 0; opacity:.7; }
    .ok { color: var(--ok); }
    .warn { color: var(--warn); }
    details { border:1px dashed var(--border); border-radius:12px; padding:10px 12px; }
    details > summary { cursor:pointer; color:var(--muted); margin:-4px 0 8px; }
  </style>
</head>
<body>
  <header>
    <h1>💼 연봉 실수령액 계산기</h1>
    <span class="hint">포괄·비포괄 모두 대응 / 수당 세분화</span>
  </header>
  <main class="wrap">
    <!-- Salary Card -->
    <section class="card" id="salaryCard">
      <h2>연봉 → 실수령액(간이) 계산기 <span class="hint">4대보험 중심, 세액은 선택 근사</span></h2>

      <div class="row">
        <div class="col">
          <label for="salaryGross">연봉(세전, 원) <span class="hint">연 12개월 고정급 총액(기본 월급만 적용)</span></label>
          <input id="salaryGross" type="number" placeholder="예: 41000000" inputmode="numeric">
        </div>
        <div class="col">
          <label for="bonusMonths">상여/성과급(개월)</label>
          <select id="bonusMonths">
            <option value="0">없음</option>
            <option value="0.5">0.5</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <label for="taxableExtra">추가 과세 수당(월, 원) <span class="hint">직책·연장·휴일 등 기본 연봉 외</span></label>
          <input id="taxableExtra" type="number" value="0" placeholder="예: 250000">
        </div>
        <div class="col">
          <label for="nonTax">비과세 수당(월, 원) <span class="hint">예: 식대 200,000</span></label>
          <input id="nonTax" type="number" value="0" placeholder="예: 200000">
        </div>
      </div>

      <details>
        <summary>⏱️ (선택) 시간 기반으로 연장/야간/휴일 수당 계산해 추가하기</summary>
        <div class="row-3">
          <div class="col">
            <label for="baseMonthly">기본급(월, 원) <span class="hint">통상시급 산정</span></label>
            <input id="baseMonthly" type="number" value="0" placeholder="예: 2296800">
          </div>
          <div class="col">
            <label>통상 시급(원) <span class="hint">= 기본급 ÷ 209</span></label>
            <input id="hourly" type="number" value="0" disabled>
          </div>
          <div class="col">
            <label>계산된 수당 합계(월, 원)</label>
            <input id="overtimeCalc" type="number" value="0" disabled>
          </div>
        </div>
        <div class="row-3">
          <div class="col">
            <label for="otHours">연장근로 시간(월) × 1.5</label>
            <input id="otHours" type="number" value="0" step="0.1">
          </div>
          <div class="col">
            <label for="nightHours">야간근로 시간(월) × +0.5</label>
            <input id="nightHours" type="number" value="0" step="0.1">
          </div>
          <div class="col">
            <label for="holiday8Hours">휴일(1~8시간) × 1.5</label>
            <input id="holiday8Hours" type="number" value="0" step="0.1">
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label for="holidayOverHours">휴일(8시간 초과) × 2.0</label>
            <input id="holidayOverHours" type="number" value="0" step="0.1">
          </div>
          <div class="col">
            <label for="applyOvertime">계산된 수당을 "추가 과세 수당"에 반영</label>
            <select id="applyOvertime">
              <option value="no">반영 안 함</option>
              <option value="yes">반영함</option>
            </select>
          </div>
        </div>
      </details>

      <div class="row">
        <div class="col">
          <label for="taxMode">세액 처리 모드</label>
          <select id="taxMode">
            <option value="none">세액 계산 제외(4대보험만)</option>
            <option value="rough">근사치(원천징수 스케일 간이)</option>
          </select>
        </div>
        <div class="col" style="display:flex;align-items:flex-end;gap:8px;">
          <button id="btnSalaryCalc" class="btn primary" style="flex:1;">계산</button>
          <button id="btnSalaryReset" class="btn ghost">리셋</button>
        </div>
      </div>

      <div class="stack" style="margin-top:6px;">
        <span class="tag">국민연금 4.5% (상한월급 적용)</span>
        <span class="tag">건강보험 3.545% + 장기요양 12.81%</span>
        <span class="tag">고용보험 0.9%</span>
      </div>

      <div class="result" id="salaryResult" hidden>
        <h3>월 기준 결과(추정)</h3>
        <div class="grid cols-3">
          <div class="kv"><span>월급(세전: 연봉/12)</span><b id="m_gross" class="mono"></b></div>
          <div class="kv"><span>추가 과세 수당</span><b id="m_taxable_extra" class="mono"></b></div>
          <div class="kv"><span>비과세 수당</span><b id="m_nontax" class="mono"></b></div>

          <div class="kv"><span>4대보험 산정기준 월액</span><b id="m_contrib_base" class="mono"></b></div>
          <div class="kv"><span>국민연금</span><b id="m_np" class="mono"></b></div>
          <div class="kv"><span>건강보험</span><b id="m_hi" class="mono"></b></div>
          <div class="kv"><span>장기요양</span><b id="m_ltc" class="mono"></b></div>
          <div class="kv"><span>고용보험</span><b id="m_ei" class="mono"></b></div>
          <div class="kv"><span>추정 소득세+지방세</span><b id="m_tax" class="mono"></b></div>

          <div class="kv"><span>공제합계</span><b id="m_ded" class="mono"></b></div>
          <div class="kv"><span>월 실수령</span><b id="m_net" class="mono ok"></b></div>
        </div>
        <div class="sep"></div>
        <h3>연 기준 결과(추정)</h3>
        <div class="grid cols-2">
          <div class="kv"><span>연간 세전(연봉+상여+추가 과세 수당×12)</span><b id="y_gross" class="mono"></b></div>
          <div class="kv"><span>연간 비과세</span><b id="y_nontax" class="mono"></b></div>
          <div class="kv"><span>연간 공제(4대보험+세액)</span><b id="y_ded" class="mono"></b></div>
          <div class="kv"><span>연 실수령</span><b id="y_net" class="mono ok"></b></div>
        </div>
        <div class="foot warn">※ 세액(소득세/지방소득세)은 "근사치" 모드에서도 실제 원천징수와 차이가 큽니다. 회사/연도/부양가족/공제 항목에 따라 달라지므로 참고용으로만 사용하세요.</div>
      </div>
    </section>
  </main>

  <script>
    const fmt = (n) => (isNaN(n)? '-' : n.toLocaleString('ko-KR'));
    const toNum = (el) => {
      const v = Number(String(el.value || '0').replace(/[^0-9.-]/g,''));
      return isNaN(v) ? 0 : v;
    };

    const CONFIG = {
      NATIONAL_PENSION_RATE: 0.045,
      NP_MONTHLY_CAP: 6090000, // 2025 추정 상한 보수월액 (필요시 조정)
      HEALTH_INSURANCE_RATE: 0.03545,
      LTC_RATE: 0.1281,
      EMPLOYMENT_INSURANCE_RATE: 0.009,
      ROUGH_TAX: function(monthlyTaxBase){
        if (monthlyTaxBase <= 0) return 0;
        // 매우 러프한 간이세율 스케일 (월 과세표준)
        let tax = 0;
        const b = [
          { up: 1400000, rate: 0.06,  quick: 0 },
          { up: 5000000, rate: 0.15, quick: 126000 },
          { up: 8800000, rate: 0.24, quick: 576000 },
          { up: 15000000, rate: 0.35, quick: 1596000 },
          { up: 30000000, rate: 0.38, quick: 3766000 },
          { up: 50000000, rate: 0.40, quick:  0 },
          { up: Infinity, rate: 0.45, quick: 0 },
        ];
        const bracket = b.find(x => monthlyTaxBase <= x.up) || b[b.length-1];
        tax = monthlyTaxBase * bracket.rate - (bracket.quick||0);
        if (tax < 0) tax = 0;
        return Math.round(tax * 1.1); // 지방세 10% 포함
      }
    };

    // Elements
    const $salaryGross   = document.getElementById('salaryGross');
    const $bonusMonths   = document.getElementById('bonusMonths');
    const $taxableExtra  = document.getElementById('taxableExtra');
    const $nonTax        = document.getElementById('nonTax');
    const $taxMode       = document.getElementById('taxMode');
    const $btnSalaryCalc = document.getElementById('btnSalaryCalc');
    const $btnSalaryReset= document.getElementById('btnSalaryReset');

    const $m_gross = document.getElementById('m_gross');
    const $m_taxable_extra = document.getElementById('m_taxable_extra');
    const $m_nontax = document.getElementById('m_nontax');
    const $m_contrib_base = document.getElementById('m_contrib_base');
    const $m_np = document.getElementById('m_np');
    const $m_hi = document.getElementById('m_hi');
    const $m_ltc = document.getElementById('m_ltc');
    const $m_ei = document.getElementById('m_ei');
    const $m_tax = document.getElementById('m_tax');
    const $m_ded = document.getElementById('m_ded');
    const $m_net = document.getElementById('m_net');

    const $y_gross = document.getElementById('y_gross');
    const $y_nontax = document.getElementById('y_nontax');
    const $y_ded = document.getElementById('y_ded');
    const $y_net = document.getElementById('y_net');

    // Overtime section
    const $baseMonthly = document.getElementById('baseMonthly');
    const $hourly = document.getElementById('hourly');
    const $overtimeCalc = document.getElementById('overtimeCalc');
    const $otHours = document.getElementById('otHours');
    const $nightHours = document.getElementById('nightHours');
    const $holiday8Hours = document.getElementById('holiday8Hours');
    const $holidayOverHours = document.getElementById('holidayOverHours');
    const $applyOvertime = document.getElementById('applyOvertime');

    const $salaryResult = document.getElementById('salaryResult');

    function calcHourly(){
      const baseM = toNum($baseMonthly);
      const hourly = baseM > 0 ? baseM / 209 : 0; // 통상시급 근사
      $hourly.value = Math.floor(hourly);
      return hourly;
    }

    function calcOvertimeAmount(){
      const h = calcHourly();
      const ot = Number($otHours.value || 0) * 1.5 * h;          // 연장 1.5배
      const night = Number($nightHours.value || 0) * 0.5 * h;    // 야간 가산 0.5배 (연장/휴일과 중복 합산 가정 X)
      const hol1 = Number($holiday8Hours.value || 0) * 1.5 * h;  // 휴일 1~8h
      const hol2 = Number($holidayOverHours.value || 0) * 2.0 * h; // 휴일 8h 초과
      const sum = Math.round(ot + night + hol1 + hol2);
      $overtimeCalc.value = sum;
      if ($applyOvertime.value === 'yes') {
        $taxableExtra.value = String(toNum($taxableExtra) + sum);
      }
      return sum;
    }

    [$baseMonthly,$otHours,$nightHours,$holiday8Hours,$holidayOverHours,$applyOvertime].forEach(el=>{
      el.addEventListener('input', calcOvertimeAmount);
      el.addEventListener('change', calcOvertimeAmount);
    });

    function clamp01(x){ return Math.max(0, x); }

    function calcSalary(){
      const grossY = toNum($salaryGross);
      const bonusM = Number($bonusMonths.value || 0);
      const taxableExtraM = toNum($taxableExtra); // 연봉 외 추가 과세 수당(월)
      const nonTaxM = toNum($nonTax);             // 비과세(월)
      const taxMode = $taxMode.value;

      if (!grossY || grossY <= 0){ alert('연봉(세전)을 입력하세요.'); return; }

      const months = 12 + bonusM;
      const grossM_base = Math.round(grossY / 12); // 연봉을 12로 나눈 월 고정급(세전)
      const grossM_taxable_all = grossM_base + taxableExtraM; // 4대보험/세액 기준 과세월액

      // 4대보험 계산
      const npBase = Math.min(grossM_taxable_all, CONFIG.NP_MONTHLY_CAP);
      const np = Math.round(npBase * CONFIG.NATIONAL_PENSION_RATE);
      const hi = Math.round(grossM_taxable_all * CONFIG.HEALTH_INSURANCE_RATE);
      const ltc = Math.round(hi * CONFIG.LTC_RATE);
      const ei = Math.round(grossM_taxable_all * CONFIG.EMPLOYMENT_INSURANCE_RATE);

      const taxBaseMonthly = clamp01(grossM_taxable_all - np - hi - ltc - ei - 0 /* 비과세 차감은 이미 과세월액에서 제외됨 */);
      const taxMonthly = (taxMode === 'rough') ? CONFIG.ROUGH_TAX(taxBaseMonthly) : 0;

      const dedM = np + hi + ltc + ei + taxMonthly;
      const netM = grossM_taxable_all - dedM + nonTaxM; // 비과세는 공제 없이 순수 가산

      // 연간
      const yGross = Math.round(grossY + grossM_base * bonusM + taxableExtraM * 12);
      const yNonTax = Math.round(nonTaxM * 12);
      const yDed = Math.round(dedM * months);
      const yNet = Math.round(netM * months);

      // 표기
      $m_gross.textContent = fmt(grossM_base);
      $m_taxable_extra.textContent = fmt(taxableExtraM);
      $m_nontax.textContent = fmt(nonTaxM);
      $m_contrib_base.textContent = fmt(grossM_taxable_all);

      $m_np.textContent = fmt(np);
      $m_hi.textContent = fmt(hi);
      $m_ltc.textContent = fmt(ltc);
      $m_ei.textContent = fmt(ei);
      $m_tax.textContent = (taxMode==='none') ? '-' : fmt(taxMonthly);

      $m_ded.textContent = fmt(dedM);
      $m_net.textContent = fmt(netM);

      $y_gross.textContent = fmt(yGross);
      $y_nontax.textContent = fmt(yNonTax);
      $y_ded.textContent = fmt(yDed);
      $y_net.textContent = fmt(yNet);

      document.getElementById('salaryResult').hidden = false;
    }

    function resetSalary(){
      $salaryGross.value = '';
      $bonusMonths.value = '0';
      $taxableExtra.value = '0';
      $nonTax.value = '0';

      $baseMonthly.value = '0';
      $hourly.value = '0';
      $overtimeCalc.value = '0';
      $otHours.value = '0';
      $nightHours.value = '0';
      $holiday8Hours.value = '0';
      $holidayOverHours.value = '0';
      $applyOvertime.value = 'no';

      document.getElementById('salaryResult').hidden = true;
    }

    document.getElementById('btnSalaryCalc').addEventListener('click', calcSalary);
    document.getElementById('btnSalaryReset').addEventListener('click', resetSalary);
  </script>
</body>
</html>
