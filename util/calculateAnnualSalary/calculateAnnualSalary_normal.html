<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>💼 연봉 실수령액 계산기</title>
  <style>
    :root {
      --bg:#0b1020; --fg:#e8ecff; --muted:#a7b0d9; --card:#121838; --accent:#6aa2ff; --ok:#3ddc97; --warn:#ffba49;
      --input:#0f1630; --border:#22305e;
    }
    * { box-sizing: border-box; }
    html,body { height: 100%; }
    body { margin:0; background:var(--bg); color:var(--fg); font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif; }
    header { position: sticky; top:0; padding:14px 18px; display:flex; gap:14px; align-items:center; background:linear-gradient(180deg, rgba(11,16,32,1), rgba(11,16,32,0.85)); backdrop-filter: blur(6px); border-bottom:1px solid var(--border); z-index:2; }
    h1 { font-size:18px; margin:0; letter-spacing: .3px; }
    .wrap { max-width: 680px; margin: 22px auto; padding: 0 16px 60px; display: grid; grid-template-columns: 1fr; gap: 18px; }
    .card { background: var(--card); border:1px solid var(--border); border-radius: 16px; padding: 18px; box-shadow: 0 6px 28px rgba(0,0,0,.25); }
    .card h2 { font-size: 16px; margin: 0 0 10px; display:flex; align-items:center; gap:10px; }
    .hint { color: var(--muted); font-size: 12px; }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin: 10px 0; }
    .col { display:flex; flex-direction: column; gap:6px; }
    label { font-size: 12px; color: var(--muted); }
    input, select, button, textarea { background: var(--input); color: var(--fg); border: 1px solid var(--border); border-radius: 10px; padding: 10px 12px; font-size: 14px; }
    input[type="number"] { text-align: right; }
    .btn { cursor: pointer; user-select: none; }
    .btn.primary { background: linear-gradient(180deg, #6aa2ff, #3a66ff); border-color: #2a4adf; }
    .btn.ghost { background: transparent; }
    .stack { display:flex; flex-wrap: wrap; gap:8px; }
    .tag { font-size:12px; padding:6px 8px; border:1px dashed var(--border); border-radius: 10px; color: var(--muted); }
    .result { margin-top: 14px; padding: 12px; background: rgba(106,162,255,.08); border:1px solid var(--border); border-radius: 12px; }
    .result h3 { margin: 0 0 6px; font-size: 14px; }
    .mono { font-variant-numeric: tabular-nums; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .grid { display:grid; gap:8px; }
    .grid.cols-3 { grid-template-columns: 1fr 1fr 1fr; }
    .grid.cols-2 { grid-template-columns: 1fr 1fr; }
    .kv { display:flex; justify-content: space-between; gap:10px; padding: 8px 10px; background: rgba(255,255,255,.02); border:1px solid var(--border); border-radius: 8px; }
    .kv b { font-weight:600; }
    .foot { margin-top: 8px; font-size: 12px; color: var(--muted); }
    .sep { height:1px; background: var(--border); margin: 10px 0; opacity:.7; }
    .ok { color: var(--ok); }
    .warn { color: var(--warn); }
  </style>
</head>
<body>
  <header>
    <h1>💼 연봉 실수령액 계산기</h1>
    <span class="hint">Static single-file • i-am-pretty-sure</span>
  </header>
  <main class="wrap">
    <!-- Salary Card -->
    <section class="card" id="salaryCard">
      <h2>연봉 → 실수령액(간이) 계산기 <span class="hint">4대보험 중심, 세액은 선택적 근사</span></h2>

      <div class="row">
        <div class="col">
          <label for="salaryGross">연봉(세전, 원)</label>
          <input id="salaryGross" type="number" placeholder="예: 41000000" inputmode="numeric">
        </div>
        <div class="col">
          <label for="nonTax">비과세 수당(월, 원)</label>
          <input id="nonTax" type="number" value="0" placeholder="예: 식대 200000 등">
        </div>
      </div>

      <div class="row">
        <div class="col">
          <label for="bonusMonths">상여/성과급(개월)</label>
          <select id="bonusMonths">
            <option value="0">없음</option>
            <option value="0.5">0.5</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
          </select>
        </div>
        <div class="col">
          <label for="taxMode">세액 처리 모드</label>
          <select id="taxMode">
            <option value="none">세액 계산 제외(4대보험만)</option>
            <option value="rough">근사치(매우 러프)</option>
          </select>
        </div>
      </div>

      <div class="stack" style="margin-top:6px;">
        <span class="tag">국민연금 4.5% (상한월급 적용)</span>
        <span class="tag">건강보험 3.545% + 장기요양 12.81%</span>
        <span class="tag">고용보험 0.9%</span>
      </div>

      <div class="stack" style="margin-top:6px;">
        <button id="btnSalaryCalc" class="btn primary">계산</button>
        <button id="btnSalaryReset" class="btn ghost">리셋</button>
      </div>

      <div class="result" id="salaryResult" hidden>
        <h3>월 기준 결과(추정)</h3>
        <div class="grid cols-3">
          <div class="kv"><span>월급(세전)</span><b id="m_gross" class="mono"></b></div>
          <div class="kv"><span>비과세</span><b id="m_nontax" class="mono"></b></div>
          <div class="kv"><span>세전+비과세</span><b id="m_gross_plus" class="mono"></b></div>

          <div class="kv"><span>국민연금</span><b id="m_np" class="mono"></b></div>
          <div class="kv"><span>건강보험</span><b id="m_hi" class="mono"></b></div>
          <div class="kv"><span>장기요양</span><b id="m_ltc" class="mono"></b></div>
          <div class="kv"><span>고용보험</span><b id="m_ei" class="mono"></b></div>
          <div class="kv"><span>추정 소득세+지방세</span><b id="m_tax" class="mono"></b></div>

          <div class="kv"><span>공제합계</span><b id="m_ded" class="mono"></b></div>
          <div class="kv"><span>월 실수령</span><b id="m_net" class="mono ok"></b></div>
        </div>
        <div class="sep"></div>
        <h3>연 기준 결과(추정)</h3>
        <div class="grid cols-2">
          <div class="kv"><span>연간 세전(연봉+상여)</span><b id="y_gross" class="mono"></b></div>
          <div class="kv"><span>연간 비과세</span><b id="y_nontax" class="mono"></b></div>
          <div class="kv"><span>연간 공제(4대보험+세액)</span><b id="y_ded" class="mono"></b></div>
          <div class="kv"><span>연 실수령</span><b id="y_net" class="mono ok"></b></div>
        </div>
        <div class="foot warn">※ 세액(소득세/지방소득세)은 "근사치" 모드에서도 실제 원천징수와 차이가 큽니다. 회사/연도/부양가족 수/각종 공제에 따라 달라지므로 참고용으로만 사용하세요.</div>
      </div>
    </section>
  </main>

  <script>
    const fmt = (n) => (isNaN(n)? '-' : n.toLocaleString('ko-KR'));
    const toNum = (el) => {
      const v = Number(String(el.value || '0').replace(/[^0-9.-]/g,''));
      return isNaN(v) ? 0 : v;
    };

    const CONFIG = {
      NATIONAL_PENSION_RATE: 0.045,
      NP_MONTHLY_CAP: 6090000,
      HEALTH_INSURANCE_RATE: 0.03545,
      LTC_RATE: 0.1281,
      EMPLOYMENT_INSURANCE_RATE: 0.009,
      ROUGH_TAX: function(monthlyTaxBase){
        if (monthlyTaxBase <= 0) return 0;
        let tax = 0;
        const b = [
          { up: 1400000, rate: 0.06,  quick: 0 },
          { up: 5000000, rate: 0.15, quick: 126000 },
          { up: 8800000, rate: 0.24, quick: 576000 },
          { up: 15000000, rate: 0.35, quick: 1596000 },
          { up: 30000000, rate: 0.38, quick: 3766000 },
          { up: 50000000, rate: 0.40, quick:  0 },
          { up: Infinity, rate: 0.45, quick: 0 },
        ];
        let bracket = b.find(x => monthlyTaxBase <= x.up) || b[b.length-1];
        tax = monthlyTaxBase * bracket.rate - (bracket.quick||0);
        if (tax < 0) tax = 0;
        return Math.round(tax * 1.1);
      }
    };

    const $salaryGross = document.getElementById('salaryGross');
    const $nonTax = document.getElementById('nonTax');
    const $bonusMonths = document.getElementById('bonusMonths');
    const $taxMode = document.getElementById('taxMode');
    const $btnSalaryCalc = document.getElementById('btnSalaryCalc');
    const $btnSalaryReset = document.getElementById('btnSalaryReset');
    const $salaryResult = document.getElementById('salaryResult');

    const $m_gross = document.getElementById('m_gross');
    const $m_nontax = document.getElementById('m_nontax');
    const $m_gross_plus = document.getElementById('m_gross_plus');
    const $m_np = document.getElementById('m_np');
    const $m_hi = document.getElementById('m_hi');
    const $m_ltc = document.getElementById('m_ltc');
    const $m_ei = document.getElementById('m_ei');
    const $m_tax = document.getElementById('m_tax');
    const $m_ded = document.getElementById('m_ded');
    const $m_net = document.getElementById('m_net');

    const $y_gross = document.getElementById('y_gross');
    const $y_nontax = document.getElementById('y_nontax');
    const $y_ded = document.getElementById('y_ded');
    const $y_net = document.getElementById('y_net');

    function clamp01(x){ return Math.max(0, x); }

    function calcSalary(){
      const grossY = toNum($salaryGross);
      const nonTaxM = toNum($nonTax);
      const bonusM = Number($bonusMonths.value || 0);
      const taxMode = $taxMode.value;

      if (!grossY || grossY <= 0){ alert('연봉(세전)을 입력하세요.'); return; }

      const months = 12 + bonusM;
      const grossM = Math.round(grossY / 12);

      const npBase = Math.min(grossM, CONFIG.NP_MONTHLY_CAP);
      const np = Math.round(npBase * CONFIG.NATIONAL_PENSION_RATE);
      const hi = Math.round(grossM * CONFIG.HEALTH_INSURANCE_RATE);
      const ltc = Math.round(hi * CONFIG.LTC_RATE);
      const ei = Math.round(grossM * CONFIG.EMPLOYMENT_INSURANCE_RATE);

      const taxBaseMonthly = clamp01(grossM - np - hi - ltc - ei - nonTaxM);
      const taxMonthly = (taxMode === 'rough') ? CONFIG.ROUGH_TAX(taxBaseMonthly) : 0;

      const dedM = np + hi + ltc + ei + taxMonthly;
      const netM = grossM - dedM + nonTaxM;

      const yGross = Math.round(grossY + grossM * bonusM);
      const yNonTax = Math.round(nonTaxM * 12);
      const yDed = Math.round(dedM * months);
      const yNet = Math.round(netM * months);

      $m_gross.textContent = fmt(grossM);
      $m_nontax.textContent = fmt(nonTaxM);
      $m_gross_plus.textContent = fmt(grossM + nonTaxM);

      $m_np.textContent = fmt(np);
      $m_hi.textContent = fmt(hi);
      $m_ltc.textContent = fmt(ltc);
      $m_ei.textContent = fmt(ei);
      $m_tax.textContent = taxMode==='none' ? '-' : fmt(taxMonthly);

      $m_ded.textContent = fmt(dedM);
      $m_net.textContent = fmt(netM);

      $y_gross.textContent = fmt(yGross);
      $y_nontax.textContent = fmt(yNonTax);
      $y_ded.textContent = fmt(yDed);
      $y_net.textContent = fmt(yNet);

      $salaryResult.hidden = false;
    }

    function resetSalary(){
      $salaryGross.value = '';
      $nonTax.value = '0';
      $bonusMonths.value = '0';
      $taxMode.value = 'none';
      $salaryResult.hidden = true;
    }

    $btnSalaryCalc.addEventListener('click', calcSalary);
    $btnSalaryReset.addEventListener('click', resetSalary);
  </script>
</body>
</html>